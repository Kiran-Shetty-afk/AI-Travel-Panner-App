const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  // safetySettings: Adjust safety settings
  // See https://ai.google.dev/gemini-api/docs/safety-settings
  history: [
    {
      role: "user",
      parts: [
        { text: "Generate Travel Plan for Location : New York, NY, USA, for 3 Days and 2 Night for A Couple with a Moderate budget with a Flight details , Flight Price with Booking url, Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time t travel each of the location for 1 days and 1 night with each day plan with best time to visit in JSON format." },
      ],
    },
    {
      role: "model",
      parts: [
        { text: "```json\n{\n  \"trip_details\": {\n    \"destination\": \"New York, NY, USA\",\n    \"duration\": \"3 Days & 2 Nights\",\n    \"travelers\": \"Couple\",\n    \"budget\": \"Moderate\",\n    \"flights\": {\n      \"details\": \"Roundtrip flight from [Your Departure City] to New York City (JFK or LGA)\",\n      \"price\": \"$300-$500 (approx.)\",\n      \"booking_url\": \"https://www.google.com/flights\" \n    },\n    \"hotels\": [\n      {\n        \"hotel_name\": \"The Jane Hotel\",\n        \"hotel_address\": \"113-115 Greenwich Street, New York, NY 10013\",\n        \"price\": \"$150-$250/night\",\n        \"hotel_image_url\": \"https://images.trvl-media.com/media/content/hotels/500/1045053.jpg\",\n        \"geo_coordinates\": [40.7154, -74.0086],\n        \"rating\": 4.5,\n        \"description\": \"A charming and historic hotel in the heart of Tribeca, offering affordable and unique accommodations.\"\n      },\n      {\n        \"hotel_name\": \"The Bowery Hotel\",\n        \"hotel_address\": \"305 Bowery, New York, NY 10003\",\n        \"price\": \"$200-$350/night\",\n        \"hotel_image_url\": \"https://images.trvl-media.com/media/content/hotels/500/2609949.jpg\",\n        \"geo_coordinates\": [40.7200, -73.9973],\n        \"rating\": 4,\n        \"description\": \"A trendy boutique hotel with stylish rooms and a vibrant atmosphere in the Lower East Side.\"\n      },\n      {\n        \"hotel_name\": \"The Roosevelt Hotel\",\n        \"hotel_address\": \"45 E 45th St, New York, NY 10017\",\n        \"price\": \"$250-$400/night\",\n        \"hotel_image_url\": \"https://images.trvl-media.com/media/content/hotels/500/1278663.jpg\",\n        \"geo_coordinates\": [40.7515, -73.9772],\n        \"rating\": 4.2,\n        \"description\": \"A classic and elegant hotel near Grand Central Station, known for its history and luxurious amenities.\"\n      }\n    ],\n    \"itinerary\": {\n      \"day1\": {\n        \"bestTime\": \"Morning\",\n        \"plan\": [\n          {\n            \"place_name\": \"Central Park\",\n            \"place_details\": \"Enjoy a stroll through the iconic park, visit the Bethesda Terrace, or take a rowboat on the lake.\",\n            \"place_image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/Central_Park_West_at_72nd_Street_view_south.jpg/1280px-Central_Park_West_at_72nd_Street_view_south.jpg\",\n            \"geo_coordinates\": [40.7829, -73.9654],\n            \"ticket_pricing\": \"Free\",\n            \"time_to_travel\": \"2-3 hours\"\n          },\n          {\n            \"place_name\": \"The Metropolitan Museum of Art\",\n            \"place_details\": \"Explore one of the world's finest art museums, featuring a vast collection spanning centuries.\",\n            \"place_image_url\": \"https://www.metmuseum.org/sites/default/files/images/met-exterior-01_0.jpg\",\n            \"geo_coordinates\": [40.7794, -73.9632],\n            \"ticket_pricing\": \"Suggested donation: $25\",\n            \"time_to_travel\": \"2-3 hours\"\n          },\n          {\n            \"place_name\": \"Times Square\",\n            \"place_details\": \"Experience the dazzling lights and bustling energy of New York City's entertainment hub.\",\n            \"place_image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Times_Square_at_Night.jpg/1280px-Times_Square_at_Night.jpg\",\n            \"geo_coordinates\": [40.7580, -73.9855],\n            \"ticketPricing\": \"Free\",\n            \"timeToTravel\": \"1 hour\"\n          }\n        ]\n      },\n      \"day2\": {\n        \"bestTime\": \"Morning\",\n        \"plan\": [\n          {\n            \"placeName\": \"Statue of Liberty & Ellis Island\",\n            \"placeDetails\": \"Take a ferry to Liberty Island and visit the iconic Statue of Liberty. Explore Ellis Island and learn about its history as a gateway for immigrants.\",\n            \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/Statue_of_Liberty_from_the_ferry_with_Ellis_Island_in_the_background.jpg/1280px-Statue_of_Liberty_from_the_ferry_with_Ellis_Island_in_the_background.jpg\",\n            \"geo_coordinates\": [40.6892, -74.0445],\n            \"ticket_pricing\": \"$30-$40\",\n            \"time_to_travel\": \"4-5 hours\"\n          },\n          {\n            \"place_name\": \"Brooklyn Bridge\",\n            \"place_details\": \"Walk or bike across the iconic Brooklyn Bridge for stunning views of the Manhattan skyline and the East River.\",\n            \"place_image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Brooklyn_Bridge_at_night.jpg/1280px-Brooklyn_Bridge_at_night.jpg\",\n            \"geo_coordinates\": [40.7025, -73.9963],\n            \"ticket_pricing\": \"Free\",\n            \"time_to_travel\": \"1-2 hours\"\n          },\n          {\n            \"place_name\": \"Dumbo, Brooklyn\",\n            \"place_details\": \"Explore this charming neighborhood with its cobblestone streets, art galleries, and waterfront views.\",\n            \"place_image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Dumbo_Manhattan_Bridge.jpg/1280px-Dumbo_Manhattan_Bridge.jpg\",\n            \"geo_coordinates\": [40.7022, -73.9902],\n            \"ticket_pricing\": \"Free\",\n            \"ticket_pricing\": \"1-2 hours\"\n          }\n        ]\n      },\n      \"day3\": {\n        \"bestTime\": \"Morning\",\n        \"plan\": [\n          {\n            \"place_name\": \"The High Line\",\n            \"place_details\": \"Take a stroll along this elevated park built on a former railway line, offering unique views of the city.\",\n            \"place_image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/c/cd/The_High_Line_from_the_south.jpg/1280px-The_High_Line_from_the_south.jpg\",\n            \"geo_coordinates\": [40.7486, -74.0058],\n            \"ticket_pricing\": \"Free\",\n            \"time_to_travel\": \"1-2 hours\"\n          },\n          {\n            \"place_name\": \"Chelsea Market\",\n            \"place_details\": \"Explore this vibrant food hall with a variety of vendors offering everything from gourmet food to artisan crafts.\",\n            \"place_image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/Chelsea_Market_NY.jpg/1280px-Chelsea_Market_NY.jpg\",\n            \"geo_coordinates\": [40.7413, -74.0017],\n            \"ticket_pricing\": \"Free\",\n            \"time_to_travel\": \"1-2 hours\"\n          },\n          {\n            \"place_name\": \"Little Italy & Chinatown\",\n            \"place_details\": \"Immerse yourselves in the vibrant cultures of these two neighborhoods, enjoying authentic food and exploring the markets.\",\n            \"place_image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8e/Chinatown%2C_New_York_City.jpg/1280px-Chinatown%2C_New_York_City.jpg\",\n            \"geo_coordinates\": [40.7184, -73.9970],\n            \"ticket_pricing\": \"Free\",\n            \"time_to_travel\": \"2-3 hours\"\n          }\n        ]\n      }\n    }\n  }\n}\n```\n\n**Please note:**\n\n* This is a sample itinerary and can be customized based on your preferences.\n* Flight prices are approximate and can vary depending on the time of year and booking date.\n* Hotel prices are also approximate and can fluctuate based on demand and availability.\n* Remember to check for any entry fees or reservation requirements for specific attractions. \n* Have a wonderful time in New York City! \n" },
      ],
    },
  ],
});

// const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// const candidates = result.response.candidates;
